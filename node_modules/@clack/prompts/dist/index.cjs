"use strict";const core=require("@clack/core"),process$1=require("node:process"),color=require("picocolors"),sisteransi=require("sisteransi");function isUnicodeSupported(){return process$1.platform!=="win32"?process$1.env.TERM!=="linux":Boolean(process$1.env.CI)||Boolean(process$1.env.WT_SESSION)||Boolean(process$1.env.TERMINUS_SUBLIME)||process$1.env.ConEmuTask==="{cmd::Cmder}"||process$1.env.TERM_PROGRAM==="Terminus-Sublime"||process$1.env.TERM_PROGRAM==="vscode"||process$1.env.TERM==="xterm-256color"||process$1.env.TERM==="alacritty"||process$1.env.TERMINAL_EMULATOR==="JetBrains-JediTerm"}const unicode=isUnicodeSupported(),s=(e,i)=>unicode?e:i,S_STEP_ACTIVE=s("\u25C6","*"),S_STEP_CANCEL=s("\u25A0","x"),S_STEP_ERROR=s("\u25B2","x"),S_STEP_SUBMIT=s("\u25C7","o"),S_BAR_START=s("\u250C","T"),S_BAR=s("\u2502","|"),S_BAR_END=s("\u2514","\u2014"),S_RADIO_ACTIVE=s("\u25CF",">"),S_RADIO_INACTIVE=s("\u25CB"," "),S_CHECKBOX_ACTIVE=s("\u25FB","[\u2022]"),S_CHECKBOX_SELECTED=s("\u25FC","[+]"),S_CHECKBOX_INACTIVE=s("\u25FB","[ ]"),S_BAR_H=s("\u2500","-"),S_CORNER_TOP_RIGHT=s("\u256E","+"),S_CONNECT_LEFT=s("\u251C","+"),S_CORNER_BOTTOM_RIGHT=s("\u256F","+"),symbol=e=>{switch(e){case"initial":case"active":return color.cyan(S_STEP_ACTIVE);case"cancel":return color.red(S_STEP_CANCEL);case"error":return color.yellow(S_STEP_ERROR);case"submit":return color.green(S_STEP_SUBMIT)}},text=e=>new core.TextPrompt({validate:e.validate,placeholder:e.placeholder,defaultValue:e.defaultValue,initialValue:e.initialValue,render(){const i=`${color.gray(S_BAR)}
${symbol(this.state)}  ${e.message}
`,n=e.placeholder?color.inverse(e.placeholder[0])+color.dim(e.placeholder.slice(1)):color.inverse(color.hidden("_")),r=this.value?this.valueWithCursor:n;switch(this.state){case"error":return`${i.trim()}
${color.yellow(S_BAR)}  ${r}
${color.yellow(S_BAR_END)}  ${color.yellow(this.error)}
`;case"submit":return`${i}${color.gray(S_BAR)}  ${color.dim(this.value||e.placeholder)}`;case"cancel":return`${i}${color.gray(S_BAR)}  ${color.strikethrough(color.dim(this.value??""))}${this.value?.trim()?`
`+color.gray(S_BAR):""}`;default:return`${i}${color.cyan(S_BAR)}  ${r}
${color.cyan(S_BAR_END)}
`}}}).prompt(),confirm=e=>{const i=e.active??"Yes",n=e.inactive??"No";return new core.ConfirmPrompt({active:i,inactive:n,initialValue:e.initialValue??!0,render(){const r=`${color.gray(S_BAR)}
${symbol(this.state)}  ${e.message}
`,t=this.value?i:n;switch(this.state){case"submit":return`${r}${color.gray(S_BAR)}  ${color.dim(t)}`;case"cancel":return`${r}${color.gray(S_BAR)}  ${color.strikethrough(color.dim(t))}
${color.gray(S_BAR)}`;default:return`${r}${color.cyan(S_BAR)}  ${this.value?`${color.green(S_RADIO_ACTIVE)} ${i}`:`${color.dim(S_RADIO_INACTIVE)} ${color.dim(i)}`} ${color.dim("/")} ${this.value?`${color.dim(S_RADIO_INACTIVE)} ${color.dim(n)}`:`${color.green(S_RADIO_ACTIVE)} ${n}`}
${color.cyan(S_BAR_END)}
`}}}).prompt()},select=e=>{const i=(n,r)=>{const t=n.label??String(n.value);return r==="active"?`${color.green(S_RADIO_ACTIVE)} ${t} ${n.hint?color.dim(`(${n.hint})`):""}`:r==="selected"?`${color.dim(t)}`:r==="cancelled"?`${color.strikethrough(color.dim(t))}`:`${color.dim(S_RADIO_INACTIVE)} ${color.dim(t)}`};return new core.SelectPrompt({options:e.options,initialValue:e.initialValue,render(){const n=`${color.gray(S_BAR)}
${symbol(this.state)}  ${e.message}
`;switch(this.state){case"submit":return`${n}${color.gray(S_BAR)}  ${i(this.options[this.cursor],"selected")}`;case"cancel":return`${n}${color.gray(S_BAR)}  ${i(this.options[this.cursor],"cancelled")}
${color.gray(S_BAR)}`;default:return`${n}${color.cyan(S_BAR)}  ${this.options.map((r,t)=>i(r,t===this.cursor?"active":"inactive")).join(`
${color.cyan(S_BAR)}  `)}
${color.cyan(S_BAR_END)}
`}}}).prompt()},multiselect=e=>{const i=(n,r)=>{const t=n.label??String(n.value);return r==="active"?`${color.cyan(S_CHECKBOX_ACTIVE)} ${t} ${n.hint?color.dim(`(${n.hint})`):""}`:r==="selected"?`${color.green(S_CHECKBOX_SELECTED)} ${color.dim(t)}`:r==="cancelled"?`${color.strikethrough(color.dim(t))}`:r==="active-selected"?`${color.green(S_CHECKBOX_SELECTED)} ${t} ${n.hint?color.dim(`(${n.hint})`):""}`:r==="submitted"?`${color.dim(t)}`:`${color.dim(S_CHECKBOX_INACTIVE)} ${color.dim(t)}`};return new core.MultiSelectPrompt({options:e.options,initialValue:e.initialValue,required:e.required??!0,cursorAt:e.cursorAt,render(){let n=`${color.gray(S_BAR)}
${symbol(this.state)}  ${e.message}
`;switch(this.state){case"submit":{const r=this.options.filter(t=>this.selectedValues.some(c=>c===t.value));return`${n}${color.gray(S_BAR)}  ${r.map((t,c)=>i(t,"submitted")).join(color.dim(", "))}`}case"cancel":{const t=this.options.filter(c=>this.selectedValues.some(a=>a===c.value)).map((c,a)=>i(c,"cancelled")).join(color.dim(", "));return`${n}${color.gray(S_BAR)}  ${t.trim()?`${t}
${color.gray(S_BAR)}`:""}`}case"error":{const r=this.error.split(`
`).map((t,c)=>c===0?`${color.yellow(S_BAR_END)}  ${color.yellow(t)}`:`   ${t}`).join(`
`);return`${n}${color.yellow(S_BAR)}  ${this.options.map((t,c)=>{const a=this.selectedValues.includes(t.value),o=c===this.cursor;return o&&a?i(t,"active-selected"):a?i(t,"selected"):i(t,o?"active":"inactive")}).join(`
${color.yellow(S_BAR)}  `)}
${r}
`}default:return`${n}${color.cyan(S_BAR)}  ${this.options.map((r,t)=>{const c=this.selectedValues.includes(r.value),a=t===this.cursor;return a&&c?i(r,"active-selected"):c?i(r,"selected"):i(r,a?"active":"inactive")}).join(`
${color.cyan(S_BAR)}  `)}
${color.cyan(S_BAR_END)}
`}}}).prompt()},strip=e=>e.replace(ansiRegex(),""),note=(e="",i="")=>{const n=`
${e}
`.split(`
`),r=n.reduce((c,a)=>(a=strip(a),a.length>c?a.length:c),0)+2,t=n.map(c=>`${color.gray(S_BAR)}  ${color.dim(c)}${" ".repeat(r-strip(c).length)}${color.gray(S_BAR)}`).join(`
`);process.stdout.write(`${color.gray(S_BAR)}
${color.green(S_STEP_SUBMIT)}  ${color.reset(i)} ${color.gray(S_BAR_H.repeat(r-i.length-1)+S_CORNER_TOP_RIGHT)}
${t}
${color.gray(S_CONNECT_LEFT+S_BAR_H.repeat(r+2)+S_CORNER_BOTTOM_RIGHT)}
`)},cancel=(e="")=>{process.stdout.write(`${color.gray(S_BAR_END)}  ${color.red(e)}

`)},intro=(e="")=>{process.stdout.write(`${color.gray(S_BAR_START)}  ${e}
`)},outro=(e="")=>{process.stdout.write(`${color.gray(S_BAR)}
${color.gray(S_BAR_END)}  ${e}

`)},frames=unicode?["\u25D2","\u25D0","\u25D3","\u25D1"]:["\u2022","o","O","0"],spinner=()=>{let e,i;const n=unicode?80:120;return{start(r=""){r=r.replace(/\.?\.?\.$/,""),e=core.block(),process.stdout.write(`${color.gray(S_BAR)}
${color.magenta("\u25CB")}  ${r}
`);let t=0,c=0;i=setInterval(()=>{let a=frames[t];process.stdout.write(sisteransi.cursor.move(-999,-1)),process.stdout.write(`${color.magenta(a)}  ${r}${Math.floor(c)>=1?".".repeat(Math.floor(c)).slice(0,3):""}   
`),t=t===frames.length-1?0:t+1,c=c===frames.length?0:c+.125},n)},stop(r=""){process.stdout.write(sisteransi.cursor.move(-999,-2)),process.stdout.write(sisteransi.erase.down(2)),clearInterval(i),process.stdout.write(`${color.gray(S_BAR)}
${color.green(S_STEP_SUBMIT)}  ${r}
`),e()}}};function ansiRegex(){const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(e,"g")}const group=async(e,i)=>{const n={},r=Object.keys(e);for(const t of r){const c=await e[t]({results:n}).catch(a=>{throw a});if(typeof i?.onCancel=="function"&&core.isCancel(c)){n[t]="canceled",i.onCancel({results:n});continue}n[t]=c}return n};exports.isCancel=core.isCancel,exports.cancel=cancel,exports.confirm=confirm,exports.group=group,exports.intro=intro,exports.multiselect=multiselect,exports.note=note,exports.outro=outro,exports.select=select,exports.spinner=spinner,exports.text=text;
